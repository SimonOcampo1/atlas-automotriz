import type { LogoTierId } from "@/lib/logo-tiers";

export const SUPPORTED_LOCALES = ["es", "en"] as const;
export type Locale = typeof SUPPORTED_LOCALES[number];

export const DEFAULT_LOCALE: Locale = "es";
export const LOCALE_COOKIE_NAME = "atlas-lang";

type TierStrings = {
  label: string;
  description: string;
  hint: string;
  difficulty: string;
};

const tierTranslations: Record<Locale, Record<LogoTierId, TierStrings>> = {
  es: {
    "nivel-1": {
      label: "Fundamentos globales",
      description: "Las marcas más famosas y masivas del mundo.",
      hint: "Aprendizaje ultra rápido.",
      difficulty: "Muy fácil",
    },
    "nivel-2": {
      label: "Marcas globales",
      description: "Fabricantes con alta presencia internacional.",
      hint: "Consolida reconocimiento general.",
      difficulty: "Fácil",
    },
    "nivel-3": {
      label: "Populares regionales",
      description: "Muy vistas en mercados específicos.",
      hint: "Amplía el mapa cultural.",
      difficulty: "Media-baja",
    },
    "nivel-4": {
      label: "Premium y lujo",
      description: "Lujo, deportivos y marcas aspiracionales.",
      hint: "Refina detalles visuales.",
      difficulty: "Media",
    },
    "nivel-5": {
      label: "Performance y nicho",
      description: "Series limitadas y marcas de performance.",
      hint: "Ideal para entusiastas.",
      difficulty: "Media-alta",
    },
    "nivel-6": {
      label: "Comerciales e industriales",
      description: "Camiones, buses y transporte pesado.",
      hint: "Diferencia flotas y transporte.",
      difficulty: "Difícil",
    },
    "nivel-7": {
      label: "Históricas y locales",
      description: "Marcas antiguas o de nicho regional.",
      hint: "Requiere investigación adicional.",
      difficulty: "Muy difícil",
    },
    "nivel-8": {
      label: "Raras y extintas",
      description: "Marcas poco documentadas o ya extintas.",
      hint: "Nivel experto.",
      difficulty: "Experta",
    },
  },
  en: {
    "nivel-1": {
      label: "Global foundations",
      description: "The most famous and massive brands worldwide.",
      hint: "Ultra fast learning.",
      difficulty: "Very easy",
    },
    "nivel-2": {
      label: "Global brands",
      description: "Manufacturers with strong international presence.",
      hint: "Builds broad recognition.",
      difficulty: "Easy",
    },
    "nivel-3": {
      label: "Regional popular",
      description: "Common in specific markets.",
      hint: "Expands the cultural map.",
      difficulty: "Medium-low",
    },
    "nivel-4": {
      label: "Premium and luxury",
      description: "Luxury, sports, and aspirational brands.",
      hint: "Refine visual details.",
      difficulty: "Medium",
    },
    "nivel-5": {
      label: "Performance and niche",
      description: "Limited series and performance brands.",
      hint: "Ideal for enthusiasts.",
      difficulty: "Medium-high",
    },
    "nivel-6": {
      label: "Commercial and industrial",
      description: "Trucks, buses, and heavy transport.",
      hint: "Differentiate fleets and transport.",
      difficulty: "Hard",
    },
    "nivel-7": {
      label: "Historic and local",
      description: "Older brands or regional niche.",
      hint: "Requires extra research.",
      difficulty: "Very hard",
    },
    "nivel-8": {
      label: "Rare and extinct",
      description: "Poorly documented brands or already extinct.",
      hint: "Expert level.",
      difficulty: "Expert",
    },
  },
};

const translations = {
  es: {
    "meta.title": "Automotive Atlas",
    "meta.description":
      "Explora un catálogo completo de logos de marcas de autos con filtros, orden y niveles de dificultad.",
    "language.switchToEnglish": "Cambiar a inglés",
    "language.switchToSpanish": "Cambiar a español",
    "hero.byAuthor": "Por Simón Ocampo",
    "hero.title": "Atlas automotriz",
    "hero.subtitle": "Descubre marcas icónicas y raras con una experiencia limpia y directa.",
    "hero.exploreCollection": "Explorar colección",
    "hero.learnByLevels": "Aprender por niveles",
    "footer.imageSource": "Fuente de imágenes: repositorio",
    "footer.carImagesSource": "Imágenes de autos tomadas de",
    "brands.explore": "Explorar marcas",
    "brands.countOf": "{current} de {total} marcas",
    "brands.fullCollection": "Colección completa",
    "search.nameOrSlug": "Buscar por nombre o slug",
    "sort.asc": "Orden ascendente (A-Z)",
    "sort.desc": "Orden descendente (Z-A)",
    "filter.resolution": "Resolución",
    "filter.visualSize": "Tamaño visual",
    "filter.columns": "Columnas",
    "filter.group": "Agrupar",
    "filter.groupLetters": "Agrupar por letras",
    "filter.groupCountries": "Agrupar por países",
    "filter.allCountries": "Todos los países",
    "filter.noCountry": "Sin país",
    "filter.regions": "Regiones",
    "filter.countries": "Países",
    "size.mini": "Mini",
    "size.optimized": "Optimizado",
    "size.original": "Original",
    "size.small": "Pequeño",
    "size.medium": "Mediano",
    "size.large": "Grande",
    "columns.count": "{count} por fila",
    "action.viewModels": "Ver Modelos",
    "action.viewGenerations": "Ver Generaciones",
    "dialog.logoOf": "Logo de {name}",
    "dialog.originalSizeView": "Vista ampliada en tamaño original.",
    "dialog.selectedImageView": "Vista ampliada de la imagen seleccionada.",
    "dialog.imageTitle": "Imagen",
    "placeholder.logo": "Logo",
    "quiz.start": "Empezar quiz",
    "quiz.startShort": "Empezar",
    "quiz.selectMode": "Selecciona el modo de quiz",
    "quiz.multipleChoice": "Opción múltiple",
    "quiz.optionsPerLogo": "4 opciones por logo",
    "quiz.typed": "Tipeado",
    "quiz.typeCorrectBrand": "Escribe la marca correcta",
    "quiz.countryOrigin": "País de origen",
    "quiz.optionsWithFlag": "4 opciones con bandera",
    "quiz.cancel": "Cancelar",
    "quiz.resultTitle": "Resultado del quiz",
    "quiz.correctCount": "Aciertos: {correct} de {answered} respondidas",
    "quiz.accuracy": "Precisión: {value}%",
    "quiz.completion": "Completitud: {value}%",
    "quiz.time": "Tiempo: {value}",
    "quiz.retry": "Reintentar",
    "quiz.backToLevel": "Volver al nivel",
    "quiz.questionCount": "Pregunta {current} de {total}",
    "quiz.completedLabel": "completado",
    "quiz.lettersCount": "Letras: {count}",
    "quiz.typeBrandPlaceholder": "Escribe la marca",
    "quiz.confirm": "Confirmar",
    "quiz.incorrectAnswer": "Incorrecto. La respuesta era {name}.",
    "quiz.previous": "Anterior",
    "quiz.next": "Siguiente",
    "quiz.finish": "Finalizar",
    "quiz.countryFlagAlt": "Bandera de {name}",
    "quiz.backToLearning": "Volver a aprendizaje",
    "quiz.backToResults": "Volver a resultados",
    "quiz.performance": "Rendimiento",
    "quiz.bestRun": "Mejor registro",
    "quiz.noRecords": "Sin registros",
    "quiz.onlyMultiple": "Solo opción múltiple con 4 respuestas.",
    "quiz.onlyMultiplePerQuestion": "Solo opción múltiple con 4 respuestas por pregunta.",
    "quiz.modelQuizTitle": "Quiz de modelos · {brand}",
    "quiz.brandQuizTitle": "Quiz · {label}",
    "quiz.modelQuizTitleShort": "Quiz · {brand}",
    "image.unavailable": "Imagen no disponible",
    "image.count": "Imagen {current} de {total}",
    "search.model": "Buscar modelo...",
    "sort.label": "Ordenar",
    "sort.yearOldest": "Año: más antiguo",
    "sort.yearNewest": "Año: más reciente",
    "results.count": "{count} resultados",
    "learn.backToAtlas": "Volver al atlas",
    "learn.guided": "Aprendizaje guiado",
    "learn.title": "Rutas de aprendizaje por niveles",
    "learn.subtitle": "Niveles balanceados por reconocimiento y dificultad real.",
    "learn.classicQuiz": "Quiz clásico",
    "learn.logoQuiz": "Quiz de logos",
    "learn.logoQuizDesc": "8 niveles con dificultad progresiva.",
    "learn.new": "Nuevo",
    "learn.modelQuiz": "Quiz de modelos",
    "learn.modelQuizDesc": "Selecciona una marca y responde por modelos.",
    "learn.brandsWithModels": "Marcas con modelos",
    "learn.viewBrand": "Ver marca",
    "tier.levelLabel": "Nivel",
    "tier.backToLevels": "Volver a niveles",
    "tier.viewLevel": "Ver nivel",
    "tier.levelBadge": "Nivel {level}",
    "tier.backToLevel": "Volver al nivel",
    "brand.modelsByBrand": "Modelos por marca",
    "brand.selectModel": "Selecciona un modelo para ver sus generaciones.",
    "brand.noModels": "Esta marca no tiene modelos disponibles.",
    "model.generations": "Generaciones",
    "model.noGenerations": "No hay generaciones disponibles para este modelo.",
    "general.backToModels": "Volver a modelos",
    "general.backToAtlas": "Volver al atlas",
    "general.backToLearning": "Volver a aprendizaje",
    "counts.brands": "{count} marcas",
    "counts.models": "{count} modelos",
    "counts.logos": "{count} logos",
    "counts.generations": "{count} generaciones",
    "empty.noItems": "No hay elementos para mostrar.",
    "empty.noModelsToShow": "No hay modelos para mostrar.",
    "empty.noModelsWithImage": "No hay modelos con imagen disponible para este quiz.",
    "empty.minModelsRequired": "Se necesitan al menos 4 modelos con imagen para iniciar el quiz.",
    "button.viewBrand": "Ver marca",
  },
  en: {
    "meta.title": "Atlas Automotriz",
    "meta.description":
      "Explore a complete catalog of car brand logos with filters, sorting, and difficulty levels.",
    "language.switchToEnglish": "Switch to English",
    "language.switchToSpanish": "Switch to Spanish",
    "hero.byAuthor": "By Simon Ocampo",
    "hero.title": "Automotive Atlas",
    "hero.subtitle": "Discover iconic and rare brands with a clean, direct experience.",
    "hero.exploreCollection": "Explore collection",
    "hero.learnByLevels": "Learn by levels",
    "footer.imageSource": "Image source: repository",
    "footer.carImagesSource": "Car images sourced from",
    "brands.explore": "Explore brands",
    "brands.countOf": "{current} of {total} brands",
    "brands.fullCollection": "Full collection",
    "search.nameOrSlug": "Search by name or slug",
    "sort.asc": "Sort ascending (A-Z)",
    "sort.desc": "Sort descending (Z-A)",
    "filter.resolution": "Resolution",
    "filter.visualSize": "Visual size",
    "filter.columns": "Columns",
    "filter.group": "Group",
    "filter.groupLetters": "Group by letters",
    "filter.groupCountries": "Group by countries",
    "filter.allCountries": "All countries",
    "filter.noCountry": "No country",
    "filter.regions": "Regions",
    "filter.countries": "Countries",
    "size.mini": "Mini",
    "size.optimized": "Optimized",
    "size.original": "Original",
    "size.small": "Small",
    "size.medium": "Medium",
    "size.large": "Large",
    "columns.count": "{count} per row",
    "action.viewModels": "View models",
    "action.viewGenerations": "View generations",
    "dialog.logoOf": "Logo of {name}",
    "dialog.originalSizeView": "Expanded view at original size.",
    "dialog.selectedImageView": "Expanded view of the selected image.",
    "dialog.imageTitle": "Image",
    "placeholder.logo": "Logo",
    "quiz.start": "Start quiz",
    "quiz.startShort": "Start",
    "quiz.selectMode": "Choose quiz mode",
    "quiz.multipleChoice": "Multiple choice",
    "quiz.optionsPerLogo": "4 options per logo",
    "quiz.typed": "Typed",
    "quiz.typeCorrectBrand": "Type the correct brand",
    "quiz.countryOrigin": "Country of origin",
    "quiz.optionsWithFlag": "4 options with flag",
    "quiz.cancel": "Cancel",
    "quiz.resultTitle": "Quiz result",
    "quiz.correctCount": "Correct: {correct} of {answered} answered",
    "quiz.accuracy": "Accuracy: {value}%",
    "quiz.completion": "Completion: {value}%",
    "quiz.time": "Time: {value}",
    "quiz.retry": "Try again",
    "quiz.backToLevel": "Back to level",
    "quiz.questionCount": "Question {current} of {total}",
    "quiz.completedLabel": "completed",
    "quiz.lettersCount": "Letters: {count}",
    "quiz.typeBrandPlaceholder": "Type the brand",
    "quiz.confirm": "Confirm",
    "quiz.incorrectAnswer": "Incorrect. The answer was {name}.",
    "quiz.previous": "Previous",
    "quiz.next": "Next",
    "quiz.finish": "Finish",
    "quiz.countryFlagAlt": "Flag of {name}",
    "quiz.backToLearning": "Back to learning",
    "quiz.backToResults": "Back to results",
    "quiz.performance": "Performance",
    "quiz.bestRun": "Best run",
    "quiz.noRecords": "No records",
    "quiz.onlyMultiple": "Multiple choice only, 4 answers.",
    "quiz.onlyMultiplePerQuestion": "Multiple choice only, 4 answers per question.",
    "quiz.modelQuizTitle": "Model quiz · {brand}",
    "quiz.brandQuizTitle": "Quiz · {label}",
    "quiz.modelQuizTitleShort": "Quiz · {brand}",
    "image.unavailable": "Image not available",
    "image.count": "Image {current} of {total}",
    "search.model": "Search model...",
    "sort.label": "Sort",
    "sort.yearOldest": "Year: oldest",
    "sort.yearNewest": "Year: newest",
    "results.count": "{count} results",
    "learn.backToAtlas": "Back to atlas",
    "learn.guided": "Guided learning",
    "learn.title": "Learning paths by level",
    "learn.subtitle": "Balanced levels by recognition and real difficulty.",
    "learn.classicQuiz": "Classic quiz",
    "learn.logoQuiz": "Logo quiz",
    "learn.logoQuizDesc": "8 levels with progressive difficulty.",
    "learn.new": "New",
    "learn.modelQuiz": "Model quiz",
    "learn.modelQuizDesc": "Pick a brand and answer by model.",
    "learn.brandsWithModels": "Brands with models",
    "learn.viewBrand": "View brand",
    "tier.levelLabel": "Level",
    "tier.backToLevels": "Back to levels",
    "tier.viewLevel": "View level",
    "tier.levelBadge": "Level {level}",
    "tier.backToLevel": "Back to level",
    "brand.modelsByBrand": "Models by brand",
    "brand.selectModel": "Select a model to see its generations.",
    "brand.noModels": "This brand has no models available.",
    "model.generations": "Generations",
    "model.noGenerations": "No generations available for this model.",
    "general.backToModels": "Back to models",
    "general.backToAtlas": "Back to atlas",
    "general.backToLearning": "Back to learning",
    "counts.brands": "{count} brands",
    "counts.models": "{count} models",
    "counts.logos": "{count} logos",
    "counts.generations": "{count} generations",
    "empty.noItems": "No items to display.",
    "empty.noModelsToShow": "No models to show.",
    "empty.noModelsWithImage": "No models with images available for this quiz.",
    "empty.minModelsRequired": "At least 4 models with images are required to start the quiz.",
    "button.viewBrand": "View brand",
  },
} as const;

export type TranslationKey = keyof typeof translations.es;
export type TranslationValues = Record<string, string | number>;

export function isSupportedLocale(value: string | undefined | null): value is Locale {
  if (!value) {
    return false;
  }
  return SUPPORTED_LOCALES.includes(value as Locale);
}

export function translate(locale: Locale, key: TranslationKey, values?: TranslationValues) {
  const template = translations[locale][key] ?? translations[DEFAULT_LOCALE][key] ?? key;
  if (!values) {
    return template;
  }
  return template.replace(/\{(\w+)\}/g, (_, token) => {
    const replacement = values[token];
    return replacement === undefined ? `{${token}}` : String(replacement);
  });
}

export function getTranslations(locale: Locale) {
  return translations[locale];
}

export function getTierTranslation(locale: Locale, tierId: LogoTierId) {
  return tierTranslations[locale][tierId] ?? tierTranslations[DEFAULT_LOCALE][tierId];
}
